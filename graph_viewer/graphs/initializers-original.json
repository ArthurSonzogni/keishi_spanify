{
    "nodes": [
        {
            "id": 0,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::285:::5:::base::span<int>",
            "is_buffer": "0",
            "size_info_available": "1",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": true,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": -1
        },
        {
            "id": 1,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::812:::5:::base::span<int>",
            "is_buffer": "0",
            "size_info_available": "1",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": true,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": -1
        },
        {
            "id": 2,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::994:::7::: ",
            "is_buffer": "0",
            "size_info_available": "1",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": true,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "1"
            },
            "data_change_lhs": -1
        },
        {
            "id": 3,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::307:::0:::.data()",
            "is_buffer": "0",
            "size_info_available": "0",
            "is_deref_node": "0",
            "is_data_change": "1",
            "visited": false,
            "debug_info": {
                "added_to_component": false,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": 5
        },
        {
            "id": 4,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::391:::4:::base::span<int>",
            "is_buffer": "0",
            "size_info_available": "0",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": false,
            "debug_info": {
                "added_to_component": false,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": -1
        },
        {
            "id": 5,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::605:::7:::base::raw_span",
            "is_buffer": "1",
            "size_info_available": "1",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": true,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": -1
        },
        {
            "id": 6,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::429:::0:::.data()",
            "is_buffer": "0",
            "size_info_available": "0",
            "is_deref_node": "0",
            "is_data_change": "1",
            "visited": false,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": 4
        },
        {
            "id": 7,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::501:::4:::base::span<int>",
            "is_buffer": "0",
            "size_info_available": "0",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": false,
            "debug_info": {
                "added_to_component": false,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": -1
        },
        {
            "id": 8,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::527:::0:::.data()",
            "is_buffer": "0",
            "size_info_available": "0",
            "is_deref_node": "0",
            "is_data_change": "1",
            "visited": false,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": 7
        },
        {
            "id": 9,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::527:::6::: ",
            "is_buffer": "0",
            "size_info_available": "0",
            "is_deref_node": "1",
            "is_data_change": "0",
            "visited": false,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": -1
        },
        {
            "id": 10,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::695:::5:::base::span<int>",
            "is_buffer": "1",
            "size_info_available": "1",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": true,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": -1
        },
        {
            "id": 11,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::1145:::7::: ",
            "is_buffer": "0",
            "size_info_available": "1",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": true,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "1"
            },
            "data_change_lhs": -1
        },
        {
            "id": 12,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::1159:::7::: ",
            "is_buffer": "0",
            "size_info_available": "1",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": true,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "1"
            },
            "data_change_lhs": -1
        },
        {
            "id": 13,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::823:::0:::<empty>",
            "is_buffer": "0",
            "size_info_available": "1",
            "is_deref_node": "0",
            "is_data_change": "0",
            "visited": true,
            "debug_info": {
                "added_to_component": true,
                "original_is_buffer": "0",
                "original_size_info_available": "1"
            },
            "data_change_lhs": -1
        },
        {
            "id": 14,
            "replacement": "r:::/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc:::987:::0:::.data()",
            "is_buffer": "0",
            "size_info_available": "0",
            "is_deref_node": "0",
            "is_data_change": "1",
            "visited": false,
            "debug_info": {
                "added_to_component": false,
                "original_is_buffer": "0",
                "original_size_info_available": "0"
            },
            "data_change_lhs": 0
        }
    ],
    "links": [
        {
            "source": 0,
            "target": 2
        },
        {
            "source": 0,
            "target": 1
        },
        {
            "source": 1,
            "target": 13
        },
        {
            "source": 3,
            "target": 0
        },
        {
            "source": 4,
            "target": 5
        },
        {
            "source": 5,
            "target": 0
        },
        {
            "source": 6,
            "target": 5
        },
        {
            "source": 7,
            "target": 5
        },
        {
            "source": 8,
            "target": 5
        },
        {
            "source": 9,
            "target": 5
        },
        {
            "source": 10,
            "target": 12
        },
        {
            "source": 10,
            "target": 11
        },
        {
            "source": 14,
            "target": 1
        }
    ],
    "source": {
        "content": "// Copyright 2024 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n#include <vector>\n\n#include \"base/memory/raw_ptr.h\"\n\nclass A {\n public:\n  // Expected rewrite:\n  // A(base::span<int> ptr): member(ptr){}\n  A(int* ptr) : member(ptr) {}\n\n  // Expecte rewrite:\n  // int* advanceAndGet() { return member++.data(); }\n  int* advanceAndGet() { return member++; }\n\n  // Expected rewrite:\n  // int* get() { return member.data(); }\n  int* get() { return member.get(); }\n\n private:\n  // Expecte rewrite:\n  // base::raw_span<int> member;\n  raw_ptr<int> member;\n};\n\nstruct B {\n  // Expected rewrite:\n  // base::span<int> member;\n  int* member;\n  std::size_t size;\n};\n\nvoid fct() {\n  // Expected rewrite:\n  // base::span<int> buf = new int[1024];\n  int* buf = new int[1024];\n\n  bool condition = true;\n  std::vector<int> buf2 = {1, 2, 3};\n  // Expected rewrite:\n  // A obj((condition) ? buf : buf2);\n  A obj((condition) ? buf : buf2.data());\n\n  std::vector<int> buf3 = {4, 5, 6};\n  // Expected rewrite:\n  // B obj2{(condition) ? buf3 : buf2, buf3.size()};\n  B obj2{(condition) ? buf3.data() : buf2.data(), 2};\n  // Leads member to be marked as a buffer.\n  obj2.member[1] = 3;\n}\n",
        "file_path": "/usr/local/google/home/keishi/chromium2/src/tools/clang/spanify/tests/initializers-original.cc"
    }
}